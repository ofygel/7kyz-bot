# Схема распределения ролей и заказов в боте

## Общая концепция
Бот построен по принципу «единого доступа»: любой пользователь, который нажал `/start`, сразу получает техническую возможность брать заказы. Поверх этой общей логики уже накладываются пользовательские сценарии — кто-то выбирает «Я клиент» и остаётся в клиентском интерфейсе, а кого-то мы вручную подключаем к каналам исполнителей.

Такой подход избавляет от сложной и нестабильной автоматической регистрации. Раньше исполнители часто «зависали» на шагах подтверждения роли и не могли приступить к работе. Теперь же им достаточно попасть на канал заказов — никаких дополнительных флагов или вебхуков.

## Клиентский сценарий
1. Пользователь запускает бота командой `/start` и выбирает «Я клиент».
2. Он пользуется функционалом клиента: создаёт и отслеживает заказы, общается с поддержкой.
3. Даже будучи «клиентом», он технически обладает правом нажать кнопку «Беру заказ», если окажется в канале заказов. Однако по умолчанию клиенты туда не попадают — доступ выдаётся вручную.

## Исполнительский сценарий
1. Пользователь запускает бота `/start` (роль в анкете значения не имеет).
2. Администратор вручную добавляет его на канал с заказами.
3. Попав в канал, пользователь видит кнопки «Беру заказ», «Отказываюсь» и т.п. Нажав «Беру заказ», он начинает выполнение — никаких дополнительных подтверждений не требуется, потому что права уже даны на этапе `/start`.

## Почему так сделано
- **Минимум инфраструктурных зависимостей.** Больше не нужно поддерживать отдельные процессы регистрации исполнителя и выдачи прав.
- **Гибкость.** Если нужно оперативно подключить нового исполнителя, достаточно отправить его в канал заказов.
- **Безопасность через организацию процессов.** Клиенты не мешают исполнителям, потому что в канал их допускают вручную. Даже если клиент зайдёт туда по ошибке, администратор быстро это заметит.

## Что важно помнить разработчикам
- Не добавляйте автоматических фильтров по ролям при обработке нажатия «Беру заказ». Право брать заказы универсальное.
- Если появится новая логика разграничения доступа, проверяйте, чтобы она не ломала базовое правило: доступ появляется сразу после `/start`.
- Админские тулзы по управлению доступом в канал заказов — ключевая точка контроля. Любые изменения в интерфейсе должны учитывать ручное добавление пользователей.

Эта схема может выглядеть «плоской», но именно она избавляет команду от постоянных проблем с регистрацией исполнителей и позволяет быстро масштабировать пул тех, кто берёт заказы.
